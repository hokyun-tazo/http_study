# HTTP 헤더
---
![스크린샷(149)](https://user-images.githubusercontent.com/104821475/188360512-3c2c86ed-1b2b-47b0-bd14-4b901ec1e177.png)



## 표현 헤더

- 표현 데이터를 해석할 수 있는 정보를 제공한다
- 데이터의 유형, 데이터 길이, 압축 정보 등등

|헤더|뜻|예시|
|:---:|:---|:---|
|Content-Type| **표현 데이터의 형식을 설명한다**|text/html, charset=utf-8, Application/json, image/png|
|Content-Encoding|**표현 데이터를 압축하기 위해 사용**, 서버에서 데이터를 압축후 인코딩 헤더를 추가하면 Client 쪽에서 인코딩 헤더의 정보를 보고 압축을 해제한다|Content-Encoding: gzip, deflate, identify|
|Content-Language|**표현 데이터의 자연 언어를 표현**|Content-Language: ko, en
|Content-Length|바이트 단위로 이루어진 **표현 데이터의 길이**를 의미한다|Content-Length: 3578

---

## 협상 헤더
 - 클라이언트가 원하거나 선호하는 표현 방식을 서버에 요청해서 알리는 헤더를 말한다
 - 요청시에만 사용하는 헤더이다

|헤더|뜻|
|:---:|:---|
|Accept|클라이언트가 선호하는 미디어 타입을 전달하는 헤더
|Accept-charset| 클라이언트가 선호하는 문자 인코딩 방식을 전달
|Accept-Encoding |클라이언트가 선호하는 압축 인코딩 방식을 전달
|Accept-Language |- 클라이언트가 선호하는 자연 언어를 전달

#### 협상과 우선순위

**Quality Values**
 
 - 다중 언어를 지원하는 서버가 있을 때 원하는 언어를 **클라이언트가 우선순위를 지정해줄수 있다**
 - **1과 가까울수록 우선순위가 높은 것이며** 값을 생략하면 1이 된다
 - ex)  ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7

**경로**
 - 경로가 구체적인 것을 우선시한다
 
 - ex) text/*, text/plain, text/plain;format=flowed, */*
 
1. text/plain;format=flowed 2. text/plain 3. text/* 4. */

---

## 일반 정보헤더
|헤더|뜻
|:---:|:---|
|From |유저의 이메일 정보로써 검색 엔진 같은 곳에서 주로 사용되지만 일반적으로 잘 사용되지 않는다
|Referer |현재 요청된 페이지의 이전 웹 페이지 주소를 말하며 **Referer를 사용해서 유입 경로를 분석할수 있다**
|User-Agent |클라이언트의 애플리케이션 정보(웹 브라우저 정보 등등)를 말하며 **서버 입장에서 어떤 종류의 브라우저에서 장애가 발생하는지 파악 가능하다**
| Server|요청을 처리하는 ORIGIN서버의 SW정보를 말한다
|DATA |메시지가 발생한 날짜와 시간

---

## 쿠키 헤더
**쿠키의 개념**
 - HTTP는 무상태 프로토콜이다 이에 대한 대안으로 모든 요청에 링크와 사용자 정보를 포함한다면
 
 **로그인을 해야하는 상황일때 모든 요청에 사용자 정보가 포함되도록 개발해야 하며 개인정보 노출에 대한 위험도 증가한다**
 - 위와 같은 문제를 보완하기 위해 **Server는 Set:Cookie라는 헤더를 통해 정보를 전달하면 Client는 Cookie로 전달된 정보를 쿠키 저장소에 저장한다**
 - 로그인 정보를 요구하는 페이지에 접근하면 Client는 쿠키저장소에서 찾아서 Http 요청을 전송한다
 
 **쿠키의 생명주기**
 - Set-Cookie: expires는 쿠키의 만료일을 나타낸다
 
 >ex: Set-Cookie: expires=Sat, 26-Dec-2020 04:39:21 GMT, Set-Cookie: max-age=3600
 - 세션쿠키: 만료날짜를 생략하면 브라우저 종료시 까지만 유지한다
 - 영속쿠키: 만료 날짜를 입력하면 해당 날짜까지 유지한다

---
 
 ## 캐시
 
 - 데이터가 변경되지 않아도 동일한 요청을 할떄 계속 네트워크를 통해서 데이터를 다운받아야 한다 이때 **인터넷 네트워크는 느리기 때문에 느린 사용자 경험이 발생한다**
 - 위와 같은 문제를 개선하기 위해 고안된 것이 캐시이다
 - **만약 요청한 데이터가 브라우저 캐시에 저장되있다면 캐시에서 조회해서 가져온다**
 
 |헤더|의미|
 |:---:|:---|
 |Cache-Control: max-age|**캐시의 유효시간을 의미하며** 초단위로 구성되어 있다
 |Cache-Control: no-cache|데이터는 캐시해도 되지만 **항상 origin서버에 검증(조건부 요청을 이용)하고 사용한다는 헤더**
 |Cache-Control: no-store|데이터에 민감한 정보가 있으므로 **저장하면 안된다는 헤더**(메모리에서 사용하고 최대한 빨리 삭제)
 |Cache-Control: public|응답이 중간에 프록시 서버에 저장되어도 된다는 뜻이다|
 |Cache-Control: private|응답이 **사용자만을 위한 것이여서 프록시 서버에 저장되면 안된다는 뜻**(기본값)
 
 **캐시 무효화**
  - 웹 브라우저가 임의로 사용자의 행동을 분석해 데이터를 캐시할수 있다 이와 같은 문제를 막기 위해
  **확실한 캐시 무효화 응답이 필요하다**
  - 지시어: Cache-Control: no-cache, no-store
  - Cache-Controlo: must-revalidata는 캐시가 만료후 최초 조회시 반드시 원 서버에 검증해야 한다
  **원 서버 접근 실패시 반드시 오류가 발생해야 한다**
  
  ---
  
  ## 검증 헤더와 조건부 요청
  

